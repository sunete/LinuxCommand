
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <meta name="description" content="dstat:通用的系统资源统计工具 - 最专业的Linux命令大全，内容包含Linux命令手册、详解、学习，值得收藏的Linux命令速查手册。">
    <meta name="keywords" content="Linux,Command,命令大全,Linux命令手册,dstat,通用的系统资源统计工具">
    <title>dstat 命令，Linux dstat 命令详解：通用的系统资源统计工具 -  Linux 命令搜索引擎</title>
    <link rel="shortcut icon" href="../img/favicon.ico">
    <link rel="stylesheet" type="text/css" href="../css/index.css?v=1628823324739">
</head>
<body>

<div class="header header_list">
    <div class="search">
        <ul class="search-list" id="result">
            <!-- <li><a href="#"><strong>find</strong> - 指定目录下查找文件。</a></li> -->
        </ul>
        <input type="text" class="query" id="query" autocomplete="off" autofocus="autofocus" placeholder="Linux 命令搜索"/>
        <div class="enter-input">
            <input type="hidden" id="current_path" value="/c/dstat.html">
            <button id="search_btn">搜索</button>
        </div>
    </div>
</div>

<div class="markdown-body">

<span class="edit_btn">

<span class="split"></span>

</span>

<h1 id="dstat"><a href="#dstat" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>dstat</h1>
<p>通用的系统资源统计工具</p>
<h2 id="补充说明"><a href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>补充说明</h2>
<p><strong>dstat命令</strong> 是一个用来替换vmstat、iostat、netstat、nfsstat和ifstat这些命令的工具，是一个全能系统信息统计工具。与sysstat相比，dstat拥有一个彩色的界面，在手动观察性能状况时，数据比较显眼容易观察；而且dstat支持即时刷新，譬如输入<code>dstat 3</code>即每三秒收集一次，但最新的数据都会每秒刷新显示。和sysstat相同的是，dstat也可以收集指定的性能资源，譬如<code>dstat -c</code>即显示CPU的使用情况。</p>
<h3 id="下载安装"><a href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>下载安装</h3>
<p><strong>方法一</strong></p>
<pre class="language-shell"><code class="language-shell">yum <span class="token function">install</span> -y dstat
</code></pre>
<p><strong>方法二</strong></p>
<p>官网下载地址：http://dag.wieers.com/rpm/packages/dstat</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">wget</span> http://dag.wieers.com/rpm/packages/dstat/dstat-0.6.7-1.rh7.rf.noarch.rpm
<span class="token function">rpm</span> -ivh dstat-0.6.7-1.rh7.rf.noarch.rpm
</code></pre>
<h3 id="使用说明"><a href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>使用说明</h3>
<p>安装完后就可以使用了，dstat非常强大，可以实时的监控cpu、磁盘、网络、IO、内存等使用情况。</p>
<p>直接使用dstat，默认使用的是<code>-cdngy</code>参数，分别显示cpu、disk、net、page、system信息，默认是1s显示一条信息。可以在最后指定显示一条信息的时间间隔，如<code>dstat 5</code>是没5s显示一条，<code>dstat 5 10</code>表示没5s显示一条，一共显示10条。</p>
<pre class="language-shell"><code class="language-shell"><span class="token punctuation">[</span>root@iZ23uulau1tZ ~<span class="token punctuation">]</span><span class="token comment"># dstat</span>
----total-cpu-usage---- -dsk/total- -net/total- ---paging-- ---system--
usr sys idl wai hiq siq<span class="token operator">|</span> <span class="token builtin class-name">read</span>  writ<span class="token operator">|</span> recv  send<span class="token operator">|</span>  <span class="token keyword">in</span>   out <span class="token operator">|</span> int   csw
  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">99</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>7706B  164k<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">189</span>   <span class="token number">225</span>
  <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">100</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>4436B  826B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">195</span>   <span class="token number">248</span>
  <span class="token number">1</span>   <span class="token number">0</span>  <span class="token number">99</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>4744B  346B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">203</span>   <span class="token number">242</span>
  <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">100</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>5080B  346B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">206</span>   <span class="token number">242</span>
  <span class="token number">0</span>   <span class="token number">1</span>  <span class="token number">99</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>5458B  444B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">214</span>   <span class="token number">244</span>
  <span class="token number">1</span>   <span class="token number">0</span>  <span class="token number">99</span>   <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>5080B  346B<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">208</span>   <span class="token number">242</span>
</code></pre>
<p>下面对显示出来的部分信息作一些说明：</p>
<ol>
<li>cpu：hiq、siq分别为硬中断和软中断次数。</li>
<li>system：int、csw分别为系统的中断次数（interrupt）和上下文切换（context switch）。</li>
</ol>
<p>其他的都很好理解。</p>
<h3 id="语法"><a href="#%E8%AF%AD%E6%B3%95" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>语法</h3>
<pre class="language-shell"><code class="language-shell">dstat <span class="token punctuation">[</span>-afv<span class="token punctuation">]</span> <span class="token punctuation">[</span>options<span class="token punctuation">..</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>delay <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre>
<h3 id="常用选项"><a href="#%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>常用选项</h3>
<pre class="language-shell"><code class="language-shell">-c：显示CPU系统占用，用户占用，空闲，等待，中断，软件中断等信息。
-C：当有多个CPU时候，此参数可按需分别显示cpu状态，例：-C <span class="token number">0,1</span> 是显示cpu0和cpu1的信息。
-d：显示磁盘读写数据大小。
-D hda,total：include hda and total。
-n：显示网络状态。
-N eth1,total：有多块网卡时，指定要显示的网卡。
-l：显示系统负载情况。
-m：显示内存使用情况。
-g：显示页面使用情况。
-p：显示进程状态。
-s：显示交换分区使用情况。
-S：类似D/N。
-r：I/O请求情况。
-y：系统状态。
--ipc：显示ipc消息队列，信号等信息。
--socket：用来显示tcp udp端口状态。
-a：此为默认选项，等同于-cdngy。
-v：等同于 -pmgdsc -D total。
--output 文件：此选项也比较有用，可以把状态信息以csv的格式重定向到指定的文件中，以便日后查看。例：dstat --output /root/dstat.csv <span class="token operator">&#x26;</span> 此时让程序默默的在后台运行并把结果输出到/root/dstat.csv文件中。
</code></pre>
<p>当然dstat还有很多更高级的用法，常用的基本这些选项，更高级的用法可以结合man文档。</p>
<h3 id="实例"><a href="#%E5%AE%9E%E4%BE%8B" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>实例</h3>
<p>如想监控swap，process，sockets，filesystem并显示监控的时间：</p>
<pre class="language-shell"><code class="language-shell"><span class="token punctuation">[</span>root@iZ23uulau1tZ ~<span class="token punctuation">]</span><span class="token comment"># dstat -tsp --socket --fs</span>
----system---- ----swap--- ---procs--- ------sockets------ --filesystem-
  date/time   <span class="token operator">|</span> used  <span class="token function">free</span><span class="token operator">|</span>run blk new<span class="token operator">|</span>tot tcp udp raw frg<span class="token operator">|</span>files  inodes
<span class="token number">26</span>-07 09:23:48<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">0.0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">704</span>   <span class="token number">6488</span>
<span class="token number">26</span>-07 09:23:49<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">704</span>   <span class="token number">6488</span>
<span class="token number">26</span>-07 09:23:50<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">704</span>   <span class="token number">6489</span>
<span class="token number">26</span>-07 09:23:51<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">704</span>   <span class="token number">6489</span>
<span class="token number">26</span>-07 09:23:52<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">704</span>   <span class="token number">6489</span>
<span class="token number">26</span>-07 09:23:53<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">704</span>   <span class="token number">6489</span>
</code></pre>
<p>若要将结果输出到文件可以加<code>--output filename</code>：</p>
<pre class="language-shell"><code class="language-shell"><span class="token punctuation">[</span>root@iZ23uulau1tZ ~<span class="token punctuation">]</span><span class="token comment"># dstat -tsp --socket --fs --output /tmp/ds.csv</span>
----system---- ----swap--- ---procs--- ------sockets------ --filesystem-
  date/time   <span class="token operator">|</span> used  <span class="token function">free</span><span class="token operator">|</span>run blk new<span class="token operator">|</span>tot tcp udp raw frg<span class="token operator">|</span>files  inodes
<span class="token number">26</span>-07 09:25:31<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span> <span class="token number">0.0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">736</span>   <span class="token number">6493</span>
<span class="token number">26</span>-07 09:25:32<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">736</span>   <span class="token number">6493</span>
<span class="token number">26</span>-07 09:25:33<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">736</span>   <span class="token number">6493</span>
<span class="token number">26</span>-07 09:25:34<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">736</span>   <span class="token number">6493</span>
<span class="token number">26</span>-07 09:25:35<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">736</span>   <span class="token number">6494</span>
<span class="token number">26</span>-07 09:25:36<span class="token operator">|</span>   <span class="token number">0</span>     <span class="token number">0</span> <span class="token operator">|</span>  <span class="token number">0</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span><span class="token number">104</span>   <span class="token number">8</span>   <span class="token number">5</span>   <span class="token number">0</span>   <span class="token number">0</span><span class="token operator">|</span>  <span class="token number">736</span>   <span class="token number">6494</span>
</code></pre>
<p>这样生成的csv文件可以用excel打开，然后生成图表。</p>
<p>通过<code>dstat --list</code>可以查看dstat能使用的所有参数，其中上面internal是dstat本身自带的一些监控参数，下面<code>/usr/share/dstat</code>中是dstat的插件，这些插件可以扩展dstat的功能，如可以监控电源（battery）、mysql等。</p>
<p>下面这些插件并不是都可以直接使用的，有的还依赖其他包，如想监控mysql，必须要装python连接mysql的一些包。</p>
<pre class="language-shell"><code class="language-shell"><span class="token punctuation">[</span>root@iZ23uulau1tZ ~<span class="token punctuation">]</span><span class="token comment"># dstat --list</span>
internal:
        aio, cpu, cpu24, disk, disk24, disk24old, epoch, fs, int, int24, io, ipc, load, lock, mem, net, page, page24, proc, raw, socket, swap, swapold, sys, tcp, time, udp, unix, vm
/usr/share/dstat:
        battery, battery-remain, cpufreq, dbus, disk-util, fan, freespace, gpfs, gpfs-ops, helloworld, innodb-buffer, innodb-io, innodb-ops, lustre, memcache-hits, mysql-io, mysql-keys, mysql5-cmds, mysql5-conn, mysql5-io, mysql5-keys,
        net-packets, nfs3, nfs3-ops, nfsd3, nfsd3-ops, ntp, postfix, power, proc-count, rpc, rpcd, sendmail, snooze, thermal, top-bio, top-cpu, top-cputime, top-cputime-avg, top-io, top-latency, top-latency-avg, top-mem, top-oom, utmp,
        vm-memctl, vmk-hba, vmk-int, vmk-nic, vz-cpu, vz-io, vz-ubc, wifi
</code></pre>
<p>dstat命令的基本用法就说到这里，更多用法有待摸索，如果您需要补充内容请给我们发邮件，谢谢！</p>
<!-- Linux命令行搜索引擎：https://jaywcjlove.github.io/linux-command/ -->
</div>

<div class="footer  footer_index "><a href="../hot.html">Linux 命令列表</a></div><script type="text/javascript" src="../js/dt.js?v=1628823324531"></script><script type="text/javascript" src="../js/index.js?v=1628823324531"></script></body></html>